# TOTP Authentication

The time-based One Time Password(TOTP) is a temporary passcode, generated by an algorithm, which can be used only once. The algorithm that generates each password uses the current time of day as one of its factors, ensuring that each password is unique.
TOTP is considered more secure because the passcode is valid only for a short window of time. it is used only for a short window of time. TOTP generated by Asgardeo is valid for 30 seconds.

TOTP authenticator uses the [TOTP specification](https://datatracker.ietf.org/doc/html/rfc6238) to calculate the access tokens based on the time and the shared secret key between the user and the identity provider.

To use TOTP as a multi-factor authentication(MFA) option, users need to have an authenticator app that can scan the QR code and generate a one-time password. Some of the authenticator apps are:
- [Google Authenticator](https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2)
- [Authy](https://play.google.com/store/apps/details?id=com.authy.authy)


## Enable TOTP for an application
1. In the Asgardeo Console, navigate to **Develop > Applications**.
2. Select the application to add the multi-factor authentication.
3. Go to the **Sign-in Method** tab of the selected application.
4. For `Step 1`, click **Add Authentication** and select **username and password**.
5. Click **Add new step** and Click on **Add Authentication**.
6. Select **TOTP** authenticator and add it as `Step 2` authentication.
    <img :src="$withBase('/assets/img/guides/mfa/add-totp-authenticator.png')" alt="Configuring TOTP authenticator in Asgardeo">
7. Click **Update**.

 ::: tip Note
 TOTP can be enabled as a multi-factor authentication if any of the previous step authentication is configured with **username and password** or a **federated authenticator**.
 :::


## Enroll TOTP
1. Download authenticator.
2. Login to your application.
3. User is prompted with QR code , scan the code and click continue. (This step will happen only for the first time for a user after enabling TOTP by the administrator)
    <img :src="$withBase('/assets/img/guides/mfa/scan-qr-code-totp.png')" alt="QR code for TOTP authenticator in Asgardeo">
4. Check your authenticator which you used to scan the code.
    <img :src="$withBase('/assets/img/guides/mfa/google-authenticator.png')" alt="OTP token from the authenticator">
5. Enter the otp by checking the authenticator app.
    <img :src="$withBase('/assets/img/guides/mfa/enter-otp-token.png')" alt="User enters OTP token in Asgardeo">
6. Click **Continue**.


## Enroll TOTP via MyAccount
After the first time login, user will not be prompted with QR code in the login flow. In case, if the user wants to use another authenticator app for getting otp, user can configure it via Asgardeo MyAccount. The QR code via MyAccount is same the code prompted in the first time login flow.

Note that, enrolling TOTP via MyAccount can be done only after first login attempt using totp authentication.
 
1. In the Asgardeo MyAccount, navigate to **Security > Multi-Factor Authentication**.
    <img :src="$withBase('/assets/img/guides/mfa/scan-qr-code-via-myaccount.png')" alt="SCAN QR code in Asgardeo MyAccount">
2. Click TOTP edit icon and scan the prompted QR code using your authenticator.
